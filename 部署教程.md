# 🚀 狼人杀法官助手 - 服务器部署教程

## 📋 部署方案对比

| 平台 | 免费额度 | 部署难度 | 推荐指数 | 特点 |
|------|----------|----------|----------|------|
| **Vercel** | 无限静态站点 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 一键部署，自动HTTPS |
| **Netlify** | 100GB带宽/月 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 拖拽部署，功能丰富 |
| **GitHub Pages** | 无限静态站点 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 与GitHub集成 |
| **Railway** | $5/月额度 | ⭐⭐⭐ | ⭐⭐⭐ | 支持后端服务 |
| **Render** | 免费额度 | ⭐⭐⭐ | ⭐⭐⭐ | 支持全栈应用 |

## 🎯 推荐方案：Vercel（一键部署）

### 为什么选择Vercel？
- ✅ **完全免费**：静态站点无限制
- ✅ **一键部署**：连接GitHub自动部署
- ✅ **自动HTTPS**：SSL证书自动配置
- ✅ **全球CDN**：访问速度极快
- ✅ **自定义域名**：支持绑定自己的域名
- ✅ **自动更新**：代码推送自动部署

## 📦 方案一：Vercel部署（推荐）

### 步骤1：准备代码仓库

1. **创建GitHub仓库**
   ```bash
   # 在项目目录下初始化Git
   git init
   
   # 添加所有文件
   git add .
   
   # 提交代码
   git commit -m "Initial commit: 狼人杀法官助手"
   ```

2. **推送到GitHub**
   - 在GitHub上创建新仓库
   - 将代码推送到GitHub

### 步骤2：Vercel部署

1. **访问Vercel**
   - 打开 [https://vercel.com](https://vercel.com)
   - 使用GitHub账号登录

2. **导入项目**
   - 点击 "New Project"
   - 选择你的GitHub仓库
   - 点击 "Import"

3. **配置部署**
   - Framework Preset: `Other`
   - Build Command: 留空
   - Output Directory: 留空
   - Install Command: 留空

4. **一键部署**
   - 点击 "Deploy"
   - 等待部署完成（通常1-2分钟）

### 步骤3：访问应用

部署完成后，你会得到一个类似这样的URL：
```
https://your-project-name.vercel.app
```

## 🌐 方案二：Netlify部署

### 步骤1：准备部署包

1. **创建部署文件夹**
   ```bash
   mkdir werewolf-deploy
   cd werewolf-deploy
   
   # 复制所有文件到部署文件夹
   copy index.html .
   copy styles.css .
   copy script.js .
   copy test.html .
   copy README.md .
   ```

2. **创建netlify.toml配置文件**
   ```toml
   [build]
     publish = "."
   
   [[redirects]]
     from = "/*"
     to = "/index.html"
     status = 200
   ```

### 步骤2：Netlify部署

1. **访问Netlify**
   - 打开 [https://netlify.com](https://netlify.com)
   - 注册/登录账号

2. **拖拽部署**
   - 将整个项目文件夹拖拽到Netlify的部署区域
   - 等待部署完成

3. **获取访问链接**
   - 部署完成后会得到一个随机域名
   - 可以自定义域名

## 🔧 方案三：GitHub Pages部署

### 步骤1：创建GitHub仓库

1. **在GitHub上创建仓库**
   - 仓库名：`werewolf-judge`
   - 设置为Public（免费版要求）

2. **上传代码**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/yourusername/werewolf-judge.git
   git push -u origin main
   ```

### 步骤2：启用GitHub Pages

1. **进入仓库设置**
   - 点击仓库的 "Settings" 标签
   - 滚动到 "Pages" 部分

2. **配置Pages**
   - Source: Deploy from a branch
   - Branch: main
   - Folder: / (root)

3. **访问应用**
   - 部署完成后访问：`https://yourusername.github.io/werewolf-judge`

## 🚀 方案四：Railway部署（支持后端）

### 步骤1：创建后端服务

1. **创建package.json**
   ```json
   {
     "name": "werewolf-judge",
     "version": "1.0.0",
     "description": "狼人杀法官助手",
     "main": "server.js",
     "scripts": {
       "start": "node server.js"
     },
     "dependencies": {
       "express": "^4.18.2",
       "socket.io": "^4.7.2",
       "cors": "^2.8.5"
     }
   }
   ```

2. **创建server.js**
   ```javascript
   const express = require('express');
   const http = require('http');
   const socketIo = require('socket.io');
   const cors = require('cors');
   const path = require('path');

   const app = express();
   const server = http.createServer(app);
   const io = socketIo(server, {
     cors: {
       origin: "*",
       methods: ["GET", "POST"]
     }
   });

   app.use(cors());
   app.use(express.static('.'));

   // 房间管理
   const rooms = new Map();

   io.on('connection', (socket) => {
     console.log('用户连接:', socket.id);

     socket.on('join-room', (data) => {
       const { roomCode, playerName } = data;
       
       if (!rooms.has(roomCode)) {
         rooms.set(roomCode, {
           players: [],
           gameState: 'waiting',
           host: socket.id
         });
       }

       const room = rooms.get(roomCode);
       room.players.push({
         id: socket.id,
         name: playerName,
         isHost: room.players.length === 0
       });

       socket.join(roomCode);
       socket.emit('room-joined', { room, playerId: socket.id });
       io.to(roomCode).emit('player-list-updated', room.players);
     });

     socket.on('disconnect', () => {
       console.log('用户断开:', socket.id);
     });
   });

   const PORT = process.env.PORT || 3000;
   server.listen(PORT, () => {
     console.log(`服务器运行在端口 ${PORT}`);
   });
   ```

### 步骤2：Railway部署

1. **访问Railway**
   - 打开 [https://railway.app](https://railway.app)
   - 使用GitHub登录

2. **创建项目**
   - 点击 "New Project"
   - 选择 "Deploy from GitHub repo"
   - 选择你的仓库

3. **配置环境**
   - Railway会自动检测到Node.js项目
   - 自动安装依赖并启动

## 📱 方案五：Render部署

### 步骤1：准备部署文件

1. **创建render.yaml**
   ```yaml
   services:
     - type: web
       name: werewolf-judge
       env: static
       buildCommand: echo "Static site, no build needed"
       startCommand: npx serve -s . -l 3000
   ```

2. **创建package.json**
   ```json
   {
     "name": "werewolf-judge",
     "version": "1.0.0",
     "scripts": {
       "start": "npx serve -s . -l 3000"
     }
   }
   ```

### 步骤2：Render部署

1. **访问Render**
   - 打开 [https://render.com](https://render.com)
   - 注册/登录账号

2. **创建Web服务**
   - 点击 "New +"
   - 选择 "Web Service"
   - 连接GitHub仓库

3. **配置服务**
   - Name: werewolf-judge
   - Environment: Static Site
   - Build Command: 留空
   - Start Command: `npx serve -s . -l 3000`

## 🔧 部署后配置

### 1. 自定义域名（可选）

**Vercel/Netlify:**
1. 在项目设置中添加自定义域名
2. 配置DNS记录指向平台
3. 自动获得SSL证书

### 2. 环境变量配置

如果需要后端功能，可以配置环境变量：
```bash
# 数据库配置
DATABASE_URL=your_database_url
# 其他配置
NODE_ENV=production
```

### 3. 性能优化

**添加缓存配置：**
```html
<!-- 在index.html的head中添加 -->
<meta http-equiv="Cache-Control" content="public, max-age=31536000">
```

## 🧪 部署测试

### 1. 功能测试清单

- [ ] 页面正常加载
- [ ] 房间创建功能
- [ ] 房间加入功能
- [ ] 分享链接功能
- [ ] 游戏流程控制
- [ ] 响应式设计
- [ ] 移动端兼容性

### 2. 性能测试

```bash
# 使用PageSpeed Insights测试
https://pagespeed.web.dev/

# 使用GTmetrix测试
https://gtmetrix.com/
```

## 🚨 常见问题解决

### 1. 部署失败

**问题**: 构建失败
**解决**: 检查文件路径和依赖

**问题**: 页面404
**解决**: 配置正确的路由重定向

### 2. 功能异常

**问题**: 分享链接不工作
**解决**: 检查URL生成逻辑

**问题**: 移动端显示异常
**解决**: 检查响应式CSS

### 3. 性能问题

**问题**: 加载速度慢
**解决**: 启用CDN和压缩

## 📊 部署方案推荐

### 🥇 最佳选择：Vercel
- **适用场景**: 纯前端应用
- **优势**: 免费、快速、简单
- **部署时间**: 2-3分钟

### 🥈 备选方案：Netlify
- **适用场景**: 需要更多功能的静态站点
- **优势**: 功能丰富、拖拽部署
- **部署时间**: 3-5分钟

### 🥉 进阶方案：Railway
- **适用场景**: 需要后端服务
- **优势**: 支持全栈应用
- **部署时间**: 5-10分钟

## 🎯 一键部署脚本

### Vercel一键部署脚本

```bash
#!/bin/bash
# deploy-vercel.sh

echo "🚀 开始部署到Vercel..."

# 检查是否安装了Vercel CLI
if ! command -v vercel &> /dev/null; then
    echo "📦 安装Vercel CLI..."
    npm install -g vercel
fi

# 登录Vercel
vercel login

# 部署项目
vercel --prod

echo "✅ 部署完成！"
echo "🌐 访问你的应用："
vercel ls
```

### Netlify一键部署脚本

```bash
#!/bin/bash
# deploy-netlify.sh

echo "🚀 开始部署到Netlify..."

# 检查是否安装了Netlify CLI
if ! command -v netlify &> /dev/null; then
    echo "📦 安装Netlify CLI..."
    npm install -g netlify-cli
fi

# 登录Netlify
netlify login

# 部署项目
netlify deploy --prod --dir .

echo "✅ 部署完成！"
```

## 🎉 部署完成

恭喜！你的狼人杀法官助手现在已经成功部署到云端了！

### 下一步：
1. **分享给朋友** - 发送部署链接给朋友
2. **测试功能** - 确保所有功能正常工作
3. **收集反馈** - 根据用户反馈优化功能
4. **持续更新** - 推送代码更新自动部署

### 维护建议：
- 定期检查部署状态
- 监控访问量和性能
- 及时更新依赖包
- 备份重要数据

---

**现在就去部署你的狼人杀法官助手吧！** 🐺🎭🚀
